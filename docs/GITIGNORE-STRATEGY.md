# Git Ignore Strategy for Generated Assets

## The Question

Should generated build artifacts (icons, binaries, .build/, .bin/) be gitignored or committed?

## Current State

**Currently IGNORED:**
- `examples/*/.bin/` - Built binaries (.app, .apk, .exe)
- `examples/*/.build/` - Intermediate build artifacts
- `examples/*/icon-source.png` - Source icons (WHY? This seems wrong!)
- `examples/*/Assets.xcassets/` - Generated icon sets
- `examples/*/drawable-*/` - Android drawables
- `goup-util*` - goup-util binaries
- `go.work` - Local workspace config

## Analysis

### Option A: Gitignore Everything (Current)

**Pros:**
- ✅ Clean git history (no binary bloat)
- ✅ Smaller repository size
- ✅ Faster clones
- ✅ No platform-specific artifacts in repo
- ✅ Forces rebuild (ensures fresh builds)

**Cons:**
- ❌ Can't see examples without building
- ❌ CI needs to build everything
- ❌ No "download and run" for demos
- ❌ Screenshots require local builds
- ❌ Contributors need full toolchain

### Option B: Commit Source Icons, Ignore Generated

**What to commit:**
- ✅ `icon-source.png` - SOURCE icons (currently ignored - BUG!)
- ✅ `web/` folders - Web content (already committed)
- ✅ `README.md` files - Documentation

**What to ignore:**
- ❌ `.bin/` - Built binaries
- ❌ `.build/` - Generated icons/assets
- ❌ Platform builds (.app, .apk, etc.)

**Pros:**
- ✅ Clean separation: sources in, outputs out
- ✅ Examples are self-contained (have their icon)
- ✅ Can rebuild from source
- ✅ No binary bloat

**Cons:**
- ❌ Still need toolchain to see results
- ❌ CI still builds everything

### Option C: Commit macOS Demo Builds Only

**What to commit:**
- ✅ Source icons
- ✅ Web content  
- ✅ ONE demo build: `examples/hybrid-dashboard/.bin/hybrid-dashboard.app`

**Pros:**
- ✅ Users can try hybrid-dashboard immediately
- ✅ Visual proof it works
- ✅ Good for screenshots/demos
- ✅ Still relatively small (one .app ~20MB)

**Cons:**
- ❌ macOS-only
- ❌ Binary in git (not ideal)
- ❌ Needs updates when code changes

### Option D: Use GitHub Releases for Binaries

**Strategy:**
- Source code in main repo (no binaries)
- CI builds all examples
- Attach binaries to GitHub Releases
- README links to releases

**Pros:**
- ✅ Clean main repo
- ✅ Binaries available for download
- ✅ CI-built (trusted)
- ✅ Versioned with releases
- ✅ Don't bloat git history

**Cons:**
- ❌ Requires CI setup
- ❌ Not "instant try"

## Recommendation

**Hybrid Approach (Option B + D):**

### In Git Repository:
```
examples/
├── gio-basic/
│   ├── main.go               # ✅ COMMIT
│   ├── go.mod                # ✅ COMMIT
│   ├── icon-source.png       # ✅ COMMIT (FIX: Currently ignored!)
│   ├── README.md             # ✅ COMMIT
│   ├── .bin/                 # ❌ IGNORE (built binaries)
│   └── .build/               # ❌ IGNORE (generated assets)
│
├── hybrid-dashboard/
│   ├── main.go               # ✅ COMMIT
│   ├── web/                  # ✅ COMMIT (source web content)
│   ├── icon-source.png       # ✅ COMMIT (FIX!)
│   ├── README.md             # ✅ COMMIT
│   ├── .bin/                 # ❌ IGNORE
│   └── .build/               # ❌ IGNORE
```

### Via GitHub Releases:
- Attach pre-built examples (.app, .apk)
- Include screenshots
- Link from README

### Updated .gitignore:
```gitignore
# Build artifacts (regenerated by build process)
examples/*/.bin/
examples/*/.build/

# Go workspace (local only)
go.work
go.work.sum

# goup-util binaries (build with 'go run . self build')
goup-util-*

# Source references (local only)
.src/

# DO NOT IGNORE (these are sources):
# examples/*/icon-source.png   # KEEP THESE!
# examples/*/web/              # KEEP THESE!
# examples/*/go.mod            # KEEP THESE!
```

## Action Items

1. **Fix icon-source.png ignore** - These are SOURCE files, should be committed!
2. **Clean up .gitignore** - Remove incorrect patterns
3. **Document** - Update README with "how to build examples"
4. **CI/CD** - Set up GitHub Actions to build examples as artifacts
5. **Screenshots** - Add to docs/ (committed)

## Rationale

**Sources belong in git:**
- icon-source.png
- web/ folders
- go.mod, main.go

**Generated artifacts do NOT:**
- .bin/ (binaries)
- .build/ (generated icons)
- Platform-specific builds

**BUT make binaries available:**
- Via GitHub Releases
- Via CI artifacts
- Document how to build locally

## Current Bug

**CRITICAL**: `examples/*/icon-source.png` is currently gitignored!

These are **SOURCE FILES** not generated! They should be committed.

Check:
```bash
git ls-files examples/*/icon-source.png
# Should return files, currently returns nothing!
```

Fix:
```bash
# Remove from .gitignore
# Add and commit the source icons
git add examples/*/icon-source.png
git commit -m "Add source icons (were incorrectly gitignored)"
```

## Conclusion

**Best Practice:**
- ✅ Commit sources (code, icons, web content)
- ❌ Ignore generated artifacts (.bin, .build)
- ✅ Provide pre-built binaries via Releases
- ✅ Document build process clearly

This keeps the repo clean while making examples accessible.
